<template>
  <div>
      <div class="warrants-container">
          <div class="container">
              <div class="page-title-banner warrants">
                  <h2><svg width="40" height="36" viewBox="0 0 40 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M30 16H28C27.4696 16 26.9609 16.2107 26.5858 16.5858C26.2107 16.9609 26 17.4696 26 18C26 18.5304 26.2107 19.0391 26.5858 19.4142C26.9609 19.7893 27.4696 20 28 20H30C30.5304 20 31.0391 19.7893 31.4142 19.4142C31.7893 19.0391 32 18.5304 32 18C32 17.4696 31.7893 16.9609 31.4142 16.5858C31.0391 16.2107 30.5304 16 30 16ZM30 24H28C27.4696 24 26.9609 24.2107 26.5858 24.5858C26.2107 24.9609 26 25.4696 26 26C26 26.5304 26.2107 27.0391 26.5858 27.4142C26.9609 27.7893 27.4696 28 28 28H30C30.5304 28 31.0391 27.7893 31.4142 27.4142C31.7893 27.0391 32 26.5304 32 26C32 25.4696 31.7893 24.9609 31.4142 24.5858C31.0391 24.2107 30.5304 24 30 24ZM18 12H30C30.5304 12 31.0391 11.7893 31.4142 11.4142C31.7893 11.0391 32 10.5304 32 10C32 9.46957 31.7893 8.96086 31.4142 8.58579C31.0391 8.21071 30.5304 8 30 8H18C17.4696 8 16.9609 8.21071 16.5858 8.58579C16.2107 8.96086 16 9.46957 16 10C16 10.5304 16.2107 11.0391 16.5858 11.4142C16.9609 11.7893 17.4696 12 18 12ZM38 0H10C9.46957 0 8.96086 0.210714 8.58579 0.585786C8.21071 0.960859 8 1.46957 8 2V8H2C1.46957 8 0.960859 8.21071 0.585786 8.58579C0.210714 8.96086 0 9.46957 0 10V30C0 31.5913 0.632141 33.1174 1.75736 34.2426C2.88258 35.3679 4.4087 36 6 36H32C34.1217 36 36.1566 35.1571 37.6569 33.6569C39.1571 32.1566 40 30.1217 40 28V2C40 1.46957 39.7893 0.960859 39.4142 0.585786C39.0391 0.210714 38.5304 0 38 0ZM8 30C8 30.5304 7.78929 31.0391 7.41421 31.4142C7.03914 31.7893 6.53043 32 6 32C5.46957 32 4.96086 31.7893 4.58579 31.4142C4.21071 31.0391 4 30.5304 4 30V12H8V30ZM36 28C36 29.0609 35.5786 30.0783 34.8284 30.8284C34.0783 31.5786 33.0609 32 32 32H11.64C11.8728 31.3587 11.9946 30.6823 12 30V4H36V28ZM18 20H20C20.5304 20 21.0391 19.7893 21.4142 19.4142C21.7893 19.0391 22 18.5304 22 18C22 17.4696 21.7893 16.9609 21.4142 16.5858C21.0391 16.2107 20.5304 16 20 16H18C17.4696 16 16.9609 16.2107 16.5858 16.5858C16.2107 16.9609 16 17.4696 16 18C16 18.5304 16.2107 19.0391 16.5858 19.4142C16.9609 19.7893 17.4696 20 18 20ZM18 28H20C20.5304 28 21.0391 27.7893 21.4142 27.4142C21.7893 27.0391 22 26.5304 22 26C22 25.4696 21.7893 24.9609 21.4142 24.5858C21.0391 24.2107 20.5304 24 20 24H18C17.4696 24 16.9609 24.2107 16.5858 24.5858C16.2107 24.9609 16 25.4696 16 26C16 26.5304 16.2107 27.0391 16.5858 27.4142C16.9609 27.7893 17.4696 28 18 28Z" fill="white"/>
                      </svg>
                        Warrants</h2>
              </div>

              <div class="section-heading blue">
                  <h4 class="ms-3"><svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M15 8H14C13.7348 8 13.4804 8.10536 13.2929 8.29289C13.1054 8.48043 13 8.73478 13 9C13 9.26522 13.1054 9.51957 13.2929 9.70711C13.4804 9.89464 13.7348 10 14 10H15C15.2652 10 15.5196 9.89464 15.7071 9.70711C15.8946 9.51957 16 9.26522 16 9C16 8.73478 15.8946 8.48043 15.7071 8.29289C15.5196 8.10536 15.2652 8 15 8ZM15 12H14C13.7348 12 13.4804 12.1054 13.2929 12.2929C13.1054 12.4804 13 12.7348 13 13C13 13.2652 13.1054 13.5196 13.2929 13.7071C13.4804 13.8946 13.7348 14 14 14H15C15.2652 14 15.5196 13.8946 15.7071 13.7071C15.8946 13.5196 16 13.2652 16 13C16 12.7348 15.8946 12.4804 15.7071 12.2929C15.5196 12.1054 15.2652 12 15 12ZM9 6H15C15.2652 6 15.5196 5.89464 15.7071 5.70711C15.8946 5.51957 16 5.26522 16 5C16 4.73478 15.8946 4.48043 15.7071 4.29289C15.5196 4.10536 15.2652 4 15 4H9C8.73478 4 8.48043 4.10536 8.29289 4.29289C8.10536 4.48043 8 4.73478 8 5C8 5.26522 8.10536 5.51957 8.29289 5.70711C8.48043 5.89464 8.73478 6 9 6ZM19 0H5C4.73478 0 4.48043 0.105357 4.29289 0.292893C4.10536 0.48043 4 0.734784 4 1V4H1C0.734784 4 0.48043 4.10536 0.292893 4.29289C0.105357 4.48043 0 4.73478 0 5V15C0 15.7956 0.316071 16.5587 0.87868 17.1213C1.44129 17.6839 2.20435 18 3 18H16C17.0609 18 18.0783 17.5786 18.8284 16.8284C19.5786 16.0783 20 15.0609 20 14V1C20 0.734784 19.8946 0.48043 19.7071 0.292893C19.5196 0.105357 19.2652 0 19 0ZM4 15C4 15.2652 3.89464 15.5196 3.70711 15.7071C3.51957 15.8946 3.26522 16 3 16C2.73478 16 2.48043 15.8946 2.29289 15.7071C2.10536 15.5196 2 15.2652 2 15V6H4V15ZM18 14C18 14.5304 17.7893 15.0391 17.4142 15.4142C17.0391 15.7893 16.5304 16 16 16H5.82C5.93642 15.6793 5.9973 15.3411 6 15V2H18V14ZM9 10H10C10.2652 10 10.5196 9.89464 10.7071 9.70711C10.8946 9.51957 11 9.26522 11 9C11 8.73478 10.8946 8.48043 10.7071 8.29289C10.5196 8.10536 10.2652 8 10 8H9C8.73478 8 8.48043 8.10536 8.29289 8.29289C8.10536 8.48043 8 8.73478 8 9C8 9.26522 8.10536 9.51957 8.29289 9.70711C8.48043 9.89464 8.73478 10 9 10ZM9 14H10C10.2652 14 10.5196 13.8946 10.7071 13.7071C10.8946 13.5196 11 13.2652 11 13C11 12.7348 10.8946 12.4804 10.7071 12.2929C10.5196 12.1054 10.2652 12 10 12H9C8.73478 12 8.48043 12.1054 8.29289 12.2929C8.10536 12.4804 8 12.7348 8 13C8 13.2652 8.10536 13.5196 8.29289 13.7071C8.48043 13.8946 8.73478 14 9 14Z" fill="#1F1F1F"/>
                      </svg>
                        Warrants</h4>
              </div>


              <div v-if="!showEmptyMessage" class="warrants-list">
                  <div class="warrants-row">
                    <warrant-item  v-for="(warrant, index) in warrantsList" :key="index" :warrant="warrant" />
                  </div>
                  
              </div>
              <div v-else class="no-data">
                  <div>
                    <svg width="27" height="24" viewBox="0 0 27 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20 10.6667H18.6667C18.313 10.6667 17.9739 10.8071 17.7239 11.0572C17.4738 11.3072 17.3333 11.6464 17.3333 12C17.3333 12.3536 17.4738 12.6928 17.7239 12.9428C17.9739 13.1929 18.313 13.3333 18.6667 13.3333H20C20.3536 13.3333 20.6928 13.1929 20.9428 12.9428C21.1929 12.6928 21.3333 12.3536 21.3333 12C21.3333 11.6464 21.1929 11.3072 20.9428 11.0572C20.6928 10.8071 20.3536 10.6667 20 10.6667ZM20 16H18.6667C18.313 16 17.9739 16.1405 17.7239 16.3905C17.4738 16.6406 17.3333 16.9797 17.3333 17.3333C17.3333 17.687 17.4738 18.0261 17.7239 18.2761C17.9739 18.5262 18.313 18.6667 18.6667 18.6667H20C20.3536 18.6667 20.6928 18.5262 20.9428 18.2761C21.1929 18.0261 21.3333 17.687 21.3333 17.3333C21.3333 16.9797 21.1929 16.6406 20.9428 16.3905C20.6928 16.1405 20.3536 16 20 16ZM12 8H20C20.3536 8 20.6928 7.85952 20.9428 7.60948C21.1929 7.35943 21.3333 7.02029 21.3333 6.66667C21.3333 6.31305 21.1929 5.97391 20.9428 5.72386C20.6928 5.47381 20.3536 5.33333 20 5.33333H12C11.6464 5.33333 11.3072 5.47381 11.0572 5.72386C10.8071 5.97391 10.6667 6.31305 10.6667 6.66667C10.6667 7.02029 10.8071 7.35943 11.0572 7.60948C11.3072 7.85952 11.6464 8 12 8ZM25.3333 0H6.66667C6.31304 0 5.97391 0.140476 5.72386 0.390524C5.47381 0.640573 5.33333 0.979711 5.33333 1.33333V5.33333H1.33333C0.979711 5.33333 0.640573 5.47381 0.390524 5.72386C0.140476 5.97391 0 6.31305 0 6.66667V20C0 21.0609 0.421427 22.0783 1.17157 22.8284C1.92172 23.5786 2.93913 24 4 24H21.3333C22.7478 24 24.1044 23.4381 25.1046 22.4379C26.1048 21.4377 26.6667 20.0812 26.6667 18.6667V1.33333C26.6667 0.979711 26.5262 0.640573 26.2761 0.390524C26.0261 0.140476 25.687 0 25.3333 0ZM5.33333 20C5.33333 20.3536 5.19286 20.6928 4.94281 20.9428C4.69276 21.1929 4.35362 21.3333 4 21.3333C3.64638 21.3333 3.30724 21.1929 3.05719 20.9428C2.80714 20.6928 2.66667 20.3536 2.66667 20V8H5.33333V20ZM24 18.6667C24 19.3739 23.719 20.0522 23.219 20.5523C22.7189 21.0524 22.0406 21.3333 21.3333 21.3333H7.76C7.91523 20.9058 7.99639 20.4549 8 20V2.66667H24V18.6667ZM12 13.3333H13.3333C13.687 13.3333 14.0261 13.1929 14.2761 12.9428C14.5262 12.6928 14.6667 12.3536 14.6667 12C14.6667 11.6464 14.5262 11.3072 14.2761 11.0572C14.0261 10.8071 13.687 10.6667 13.3333 10.6667H12C11.6464 10.6667 11.3072 10.8071 11.0572 11.0572C10.8071 11.3072 10.6667 11.6464 10.6667 12C10.6667 12.3536 10.8071 12.6928 11.0572 12.9428C11.3072 13.1929 11.6464 13.3333 12 13.3333ZM12 18.6667H13.3333C13.687 18.6667 14.0261 18.5262 14.2761 18.2761C14.5262 18.0261 14.6667 17.687 14.6667 17.3333C14.6667 16.9797 14.5262 16.6406 14.2761 16.3905C14.0261 16.1405 13.687 16 13.3333 16H12C11.6464 16 11.3072 16.1405 11.0572 16.3905C10.8071 16.6406 10.6667 16.9797 10.6667 17.3333C10.6667 17.687 10.8071 18.0261 11.0572 18.2761C11.3072 18.5262 11.6464 18.6667 12 18.6667Z" fill="#1B1B1B" fill-opacity="0.5"/>
                      </svg>
                      
                      <h4>No Active/Pending<br>
                        Warrants Yet</h4>
                  </div>
              </div>

              <warrant-reject-modal />
              <warrant-accept-modal />
              <warrant-detail-modal />
              <input type="hidden" :value="getRefreshWarrantListCheck" />

          </div>
      </div>
  </div>
</template>

<script>
import { mapGetters } from 'vuex'
import WarrantAcceptModal from '~/components/warrants/WarrantAcceptModal.vue'
import WarrantDetailModal from '~/components/warrants/WarrantDetailModal.vue'
import warrantItem from '~/components/warrants/warrantItem.vue'
import WarrantRejectModal from '~/components/warrants/WarrantRejectModal.vue'
export default {
  components: { warrantItem, WarrantRejectModal, WarrantAcceptModal, WarrantDetailModal },
  name: 'Warrants',
  layout: 'master',
  middleware: ['warrantMW'],
  data () {
    return {
      warrantsList: [],
      showEmptyMessage: false,
    }
  },
  mounted () {
    this.$store.commit('setActiveTab', 'warrants')
    this.fetchAllWarrants()
  },
  computed: {
    getRefreshWarrantListCheck() {
      if(this.getRefreshWarrantList){
        this.fetchAllWarrants()
      }
      return 1
    },
    ...mapGetters({
      getRefreshWarrantList: 'warrant/getRefreshWarrantList'
    })
  },
  methods: {
    async fetchAllWarrants(){
      this.$store.commit('warrant/setRefreshWarrantList', false)
      this.warrantsList = await this.$store.dispatch(
        'warrant/fetchAllWarrants',
        {}
      )
      if (this.warrantsList.length <= 0) {
        this.showEmptyMessage = true
      }
    }
  }
}
</script>
<style lang="css">
  .page-title-banner.warrants {
      background: url('~/assets/images/warrants-banner.png') no-repeat;
      background-size: 100% !important;
  }
  .warrants-row {
    display: flex;
    margin-left: -10px;
    margin-right: -10px;
    flex-wrap: wrap;
    align-items: flex-start;
  }
  @media (min-width: 576px) {
    .warrants-row .warrants-item {
      flex: 0 0 auto;
      width: 20%;
      padding: 20px;
      margin-left: 10px;
      margin-right: 10px;
    }
  }

  .warrants-row .warrants-item  {
      background: #FFFDFA;
      border: 1px solid rgba(255, 204, 128, 0.5);
      box-sizing: border-box;


      /* Shadow */
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.05);
      border-radius: 15px;
  }
  .warrants-item .tag-no {
      font-size: 14px;
      margin-bottom: 7px;
  }
  .warrants-item .wanted-name {
      margin-bottom: 20px;
  }
  .warrants-item .wanted-name h3 {
      color: #EE0000;
      font-size: 18px;
      margin: 0;
  }
  .warrants-item .wanted-name h4 {
      font-weight: normal;
      font-size: 18px;
      margin: 0;
  }
  .warrants-item .wanted-name h5  {
      font-weight: normal;
      font-size: 18px;
      margin: 0;
      color: rgba(27, 27, 27, 0.5);
  }
  .warrants-item .created-by {
      font-size: 14px;
      color: rgba(27, 27, 27, 0.5);
  }
  .warrants-item .tag {
      background: rgba(245, 147, 0, 0.05);
      border-radius: 10px;
      color: #F59300;
      display: inline-block;
      padding: 3px 11px;
      font-size: 18px;
      margin-bottom: 20px;
  }
  .warrants-item .warrants-item-footer .btn {
      font-size: 18px;
      font-weight: normal;
      height: 50px;
  }
  .warrants-row .warrants-item.active {
      background: #FFFAFA;
      border: 1px solid rgba(255, 128, 128, 0.5);
      box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.05);
  }
  .warrants-item.active .tag  {
      background: rgba(238, 0, 0, 0.05);
      color: #EE0000
      ;
  }

</style>
