<template>
    <!-- Unlink House Modal -->
    <div id="unLinkHouseAlert" tabindex="-1"  aria-hidden="true" :style="{display: getIsUnlinkHouseToProfilePopupOpen ? 'block' : 'none'}"
    class="modal"  :class="{show: getIsUnlinkHouseToProfilePopupOpen}">
        <div class="modal-dialog alert-modal danger modal-dialog-centered">
          <div class="modal-content">
   
            <div class="modal-body">
                <div class="alert-icon">
                    <svg width="49" height="48" viewBox="0 0 49 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.6899 20.6057C7.32513 20.6883 7.96715 20.5152 8.47473 20.1244C8.9823 19.7336 9.31384 19.1572 9.39642 18.522C9.479 17.8867 9.30585 17.2447 8.91507 16.7371C8.52428 16.2296 7.94787 15.898 7.31264 15.8154L3.09717 14.7616C2.78984 14.6673 2.46669 14.636 2.14697 14.6693C1.82726 14.7026 1.51751 14.7999 1.2362 14.9554C0.954893 15.111 0.707769 15.3216 0.509556 15.5746C0.311343 15.8277 0.166097 16.118 0.0824716 16.4284C-0.0011538 16.7388 -0.0214475 17.0628 0.0228001 17.3812C0.0670477 17.6996 0.174931 18.0058 0.340022 18.2817C0.505113 18.5575 0.724034 18.7972 0.983741 18.9866C1.24345 19.1761 1.53863 19.3113 1.85169 19.3842L6.06716 20.5099C6.26782 20.5769 6.47839 20.6093 6.6899 20.6057ZM15.9352 7.21683C16.0755 7.73936 16.3887 8.19898 16.8236 8.52082C17.2585 8.84266 17.7896 9.00777 18.3303 8.98924C18.5366 9.02236 18.7468 9.02236 18.9531 8.98924C19.561 8.82107 20.078 8.41988 20.392 7.87279C20.7059 7.3257 20.7913 6.67686 20.6297 6.06716L19.504 1.85169C19.431 1.53863 19.2958 1.24345 19.1064 0.983741C18.917 0.724034 18.6772 0.505113 18.4014 0.340022C18.1256 0.174931 17.8194 0.0670477 17.501 0.0228001C17.1826 -0.0214475 16.8586 -0.0011538 16.5482 0.0824716C16.2378 0.166097 15.9474 0.311343 15.6944 0.509556C15.4413 0.707769 15.2307 0.954893 15.0752 1.2362C14.9197 1.51751 14.8223 1.82725 14.789 2.14697C14.7557 2.46669 14.7871 2.78984 14.8813 3.09717L15.9352 7.21683ZM27.5038 31.1684C27.28 30.9328 27.0107 30.7453 26.7122 30.6171C26.4136 30.489 26.0922 30.4229 25.7673 30.4229C25.4424 30.4229 25.1209 30.489 24.8224 30.6171C24.5239 30.7453 24.2546 30.9328 24.0308 31.1684L15.6478 39.6951C14.6621 40.6407 13.3491 41.1687 11.9832 41.1687C10.6173 41.1687 9.30425 40.6407 8.3186 39.6951C7.83341 39.2161 7.44816 38.6455 7.18523 38.0164C6.92229 37.3874 6.78689 36.7123 6.78689 36.0305C6.78689 35.3487 6.92229 34.6737 7.18523 34.0446C7.44816 33.4155 7.83341 32.845 8.3186 32.3659L16.8454 23.9829C17.0961 23.7682 17.2997 23.504 17.4435 23.2068C17.5872 22.9096 17.668 22.586 17.6808 22.2561C17.6935 21.9263 17.6379 21.5973 17.5175 21.29C17.3971 20.9826 17.2145 20.7035 16.981 20.4701C16.7476 20.2366 16.4685 20.054 16.1611 19.9336C15.8538 19.8132 15.5248 19.7576 15.195 19.7703C14.8651 19.7831 14.5414 19.8638 14.2443 20.0076C13.9471 20.1514 13.6829 20.355 13.4682 20.6057L4.86958 28.9648C3.93856 29.8958 3.20002 31.0011 2.69616 32.2176C2.19229 33.434 1.93295 34.7378 1.93295 36.0545C1.93295 37.3712 2.19229 38.6749 2.69616 39.8914C3.20002 41.1078 3.93856 42.2131 4.86958 43.1441C5.80061 44.0752 6.9059 44.8137 8.12234 45.3176C9.33879 45.8214 10.6426 46.0808 11.9592 46.0808C13.2759 46.0808 14.5797 45.8214 15.7961 45.3176C17.0126 44.8137 18.1179 44.0752 19.0489 43.1441L27.5038 34.6892C27.7469 34.465 27.9409 34.1927 28.0736 33.8898C28.2063 33.5868 28.2749 33.2596 28.2749 32.9288C28.2749 32.598 28.2063 32.2708 28.0736 31.9679C27.9409 31.6649 27.7469 31.3927 27.5038 31.1684ZM7.69586 11.0251C8.14198 11.4676 8.74413 11.7171 9.37247 11.7197C9.68769 11.7215 10.0002 11.6611 10.292 11.5419C10.5838 11.4227 10.8492 11.2471 11.073 11.0251C11.5191 10.5764 11.7695 9.96931 11.7695 9.33654C11.7695 8.70378 11.5191 8.09672 11.073 7.64796L7.98328 4.55821C7.52509 4.16582 6.9357 3.96078 6.33289 3.98407C5.73009 4.00735 5.15827 4.25724 4.73171 4.68381C4.30515 5.11037 4.05525 5.68219 4.03197 6.28499C4.00869 6.88779 4.21373 7.47718 4.60612 7.93538L7.69586 11.0251ZM46.2099 28.5816L41.9945 27.4559C41.6821 27.3479 41.3507 27.3057 41.0212 27.3321C40.6918 27.3584 40.3713 27.4526 40.08 27.6088C39.7887 27.7651 39.5329 27.9799 39.3287 28.2397C39.1245 28.4996 38.9763 28.799 38.8934 29.1189C38.8105 29.4389 38.7947 29.7726 38.8471 30.0989C38.8994 30.4253 39.0187 30.7373 39.1975 31.0152C39.3763 31.2932 39.6107 31.5312 39.886 31.7142C40.1612 31.8972 40.4714 32.0212 40.7969 32.0785L45.0124 33.2042H45.6351C46.2703 33.2868 46.9123 33.1137 47.4199 32.7229C47.9275 32.3321 48.259 31.7557 48.3416 31.1205C48.4242 30.4852 48.251 29.8432 47.8603 29.3356C47.4695 28.8281 46.8931 28.4965 46.2578 28.4139L46.2099 28.5816ZM32.1264 40.749C32.0433 40.4453 31.9011 40.161 31.708 39.9124C31.5149 39.6638 31.2746 39.4556 31.001 39.2999C30.7274 39.1442 30.4257 39.0439 30.1133 39.0049C29.8009 38.9659 29.4839 38.9888 29.1804 39.0724C28.5725 39.2405 28.0554 39.6417 27.7415 40.1888C27.4276 40.7359 27.3422 41.3848 27.5038 41.9945L28.6295 46.2099C28.7699 46.7325 29.083 47.1921 29.5179 47.5139C29.9528 47.8358 30.4839 48.0009 31.0247 47.9823C31.2316 48.0059 31.4405 48.0059 31.6474 47.9823C31.9532 47.9018 32.24 47.7614 32.4913 47.5694C32.7426 47.3774 32.9534 47.1375 33.1115 46.8636C33.2696 46.5897 33.3719 46.2873 33.4125 45.9736C33.4531 45.66 33.4311 45.3414 33.348 45.0363L32.1264 40.749ZM40.3658 36.9886C39.9076 36.5962 39.3182 36.3912 38.7154 36.4144C38.1126 36.4377 37.5407 36.6876 37.1142 37.1142C36.6876 37.5407 36.4377 38.1126 36.4144 38.7154C36.3912 39.3182 36.5962 39.9076 36.9886 40.3658L40.0783 43.4555C40.5271 43.9016 41.1342 44.152 41.7669 44.152C42.3997 44.152 43.0067 43.9016 43.4555 43.4555C43.9016 43.0067 44.152 42.3997 44.152 41.7669C44.152 41.1342 43.9016 40.5271 43.4555 40.0783L40.3658 36.9886ZM46.0662 12.0071C46.1034 10.0154 45.5428 8.05827 44.4566 6.38835C43.3705 4.71843 41.8087 3.41242 39.973 2.63893C38.1372 1.86543 36.1117 1.65996 34.158 2.04904C32.2043 2.43813 30.4121 3.4039 29.0127 4.82168L20.5578 13.3484C20.3314 13.5765 20.152 13.8469 20.0301 14.1442C19.9081 14.4416 19.8459 14.76 19.847 15.0814C19.8481 15.4028 19.9125 15.7208 20.0366 16.0173C20.1606 16.3138 20.3418 16.583 20.5698 16.8094C20.7979 17.0359 21.0683 17.2152 21.3656 17.3372C21.663 17.4591 21.9814 17.5213 22.3028 17.5202C22.6242 17.5191 22.9422 17.4547 23.2387 17.3307C23.5352 17.2067 23.8043 17.0255 24.0308 16.7974L32.4138 8.2707C33.3995 7.32507 34.7125 6.79706 36.0784 6.79706C37.4443 6.79706 38.7574 7.32507 39.743 8.2707C40.2282 8.74971 40.6135 9.32031 40.8764 9.94938C41.1393 10.5784 41.2747 11.2535 41.2747 11.9353C41.2747 12.6171 41.1393 13.2921 40.8764 13.9212C40.6135 14.5503 40.2282 15.1209 39.743 15.5999L31.2163 23.9829C30.7702 24.4317 30.5198 25.0387 30.5198 25.6715C30.5198 26.3043 30.7702 26.9113 31.2163 27.3601C31.665 27.8062 32.2721 28.0566 32.9049 28.0566C33.5376 28.0566 34.1447 27.8062 34.5934 27.3601L43.192 19.001C45.0253 17.1336 46.0566 14.624 46.0662 12.0071Z" fill="#EE0000"/>
                        </svg>
                        
                </div>
                <div class="alert-content">
                    <h4>Unlink House</h4>
                    <p>Are you sure?<br>This user will no longer remain the owner of this house.</p>
                </div>
            </div>
            <div class="alert-footer">
                <button
                    class="btn"
                    data-bs-dismiss='modal'
                    @click="closeUnlinkHouseToProfilePopup()"
                >
                Close</button>
                <button class="btn btn-danger"
                  data-bs-dismiss='modal'
                  @click="unlinkHouse()"
                >

                    <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.50871 7.72715C2.74692 7.75812 2.98768 7.69319 3.17802 7.54664C3.36836 7.4001 3.49269 7.18395 3.52366 6.94573C3.55463 6.70752 3.4897 6.46676 3.34315 6.27642C3.19661 6.08608 2.98045 5.96176 2.74224 5.93079L1.16144 5.53559C1.04619 5.50026 0.925008 5.48849 0.805114 5.50098C0.685221 5.51347 0.569068 5.54996 0.463576 5.60829C0.358085 5.66662 0.265413 5.74558 0.191083 5.84048C0.116754 5.93538 0.0622864 6.04427 0.0309268 6.16066C-0.000432673 6.27705 -0.00804282 6.39856 0.00855003 6.51796C0.0251429 6.63735 0.0655992 6.75219 0.127508 6.85562C0.189417 6.95905 0.271513 7.04896 0.368903 7.11999C0.466293 7.19102 0.576985 7.24173 0.694383 7.26908L2.27518 7.69123C2.35043 7.71634 2.4294 7.72848 2.50871 7.72715ZM5.9757 2.70631C6.02833 2.90226 6.14576 3.07462 6.30885 3.19531C6.47195 3.316 6.6711 3.37791 6.87388 3.37097C6.95123 3.38339 7.03006 3.38339 7.10741 3.37097C7.33538 3.3079 7.52927 3.15746 7.64698 2.9523C7.7647 2.74714 7.79673 2.50382 7.73613 2.27518L7.31399 0.694383C7.28664 0.576985 7.23593 0.466293 7.1649 0.368903C7.09387 0.271513 7.00396 0.189417 6.90053 0.127508C6.7971 0.0655992 6.68226 0.0251429 6.56287 0.00855003C6.44347 -0.00804282 6.32196 -0.000432673 6.20557 0.0309268C6.08918 0.0622864 5.98029 0.116754 5.88539 0.191083C5.79049 0.265413 5.71153 0.358085 5.6532 0.463576C5.59487 0.569068 5.55838 0.685221 5.54589 0.805114C5.53339 0.925008 5.54517 1.04619 5.5805 1.16144L5.9757 2.70631ZM10.3139 11.6881C10.23 11.5998 10.129 11.5295 10.0171 11.4814C9.90512 11.4334 9.78456 11.4086 9.66274 11.4086C9.54091 11.4086 9.42035 11.4334 9.30841 11.4814C9.19646 11.5295 9.09546 11.5998 9.01155 11.6881L5.86791 14.8857C5.4983 15.2403 5.00591 15.4383 4.4937 15.4383C3.98148 15.4383 3.48909 15.2403 3.11948 14.8857C2.93753 14.706 2.79306 14.4921 2.69446 14.2562C2.59586 14.0203 2.54509 13.7671 2.54509 13.5114C2.54509 13.2558 2.59586 13.0026 2.69446 12.7667C2.79306 12.5308 2.93753 12.3169 3.11948 12.1372L6.31701 8.99359C6.41103 8.91307 6.48739 8.81398 6.5413 8.70255C6.59522 8.59112 6.62551 8.46974 6.63029 8.34605C6.63507 8.22235 6.61423 8.099 6.56907 7.98374C6.52391 7.86848 6.45542 7.7638 6.36789 7.67627C6.28036 7.58874 6.17567 7.52024 6.06042 7.47509C5.94516 7.42993 5.82181 7.40909 5.69811 7.41387C5.57441 7.41864 5.45304 7.44894 5.34161 7.50285C5.23017 7.55676 5.13109 7.63313 5.05057 7.72715L1.82609 10.8618C1.47696 11.2109 1.20001 11.6254 1.01106 12.0816C0.822108 12.5378 0.724856 13.0267 0.724856 13.5204C0.724856 14.0142 0.822108 14.5031 1.01106 14.9593C1.20001 15.4154 1.47696 15.8299 1.82609 16.179C2.17523 16.5282 2.58971 16.8051 3.04588 16.9941C3.50205 17.183 3.99096 17.2803 4.48471 17.2803C4.97847 17.2803 5.46738 17.183 5.92355 16.9941C6.37971 16.8051 6.7942 16.5282 7.14333 16.179L10.3139 13.0085C10.4051 12.9244 10.4778 12.8223 10.5276 12.7087C10.5774 12.595 10.6031 12.4723 10.6031 12.3483C10.6031 12.2243 10.5774 12.1016 10.5276 11.9879C10.4778 11.8743 10.4051 11.7722 10.3139 11.6881ZM2.88595 4.13442C3.05324 4.30036 3.27905 4.3939 3.51468 4.3949C3.63288 4.39558 3.75006 4.37292 3.85949 4.32822C3.96893 4.28353 4.06846 4.21767 4.15239 4.13442C4.31967 3.96614 4.41357 3.73849 4.41357 3.5012C4.41357 3.26392 4.31967 3.03627 4.15239 2.86798L2.99373 1.70933C2.82191 1.56218 2.60089 1.48529 2.37483 1.49402C2.14878 1.50276 1.93435 1.59647 1.77439 1.75643C1.61443 1.91639 1.52072 2.13082 1.51199 2.35687C1.50326 2.58292 1.58015 2.80394 1.72729 2.97577L2.88595 4.13442ZM17.3287 10.7181L15.7479 10.296C15.6308 10.2555 15.5065 10.2397 15.383 10.2495C15.2594 10.2594 15.1392 10.2947 15.03 10.3533C14.9208 10.4119 14.8249 10.4924 14.7483 10.5899C14.6717 10.6874 14.6161 10.7996 14.585 10.9196C14.5539 11.0396 14.548 11.1647 14.5677 11.2871C14.5873 11.4095 14.632 11.5265 14.6991 11.6307C14.7661 11.735 14.854 11.8242 14.9572 11.8928C15.0605 11.9614 15.1768 12.008 15.2988 12.0294L16.8796 12.4516H17.1132C17.3514 12.4826 17.5921 12.4176 17.7825 12.2711C17.9728 12.1245 18.0971 11.9084 18.1281 11.6702C18.1591 11.432 18.0941 11.1912 17.9476 11.0009C17.8011 10.8105 17.5849 10.6862 17.3467 10.6552L17.3287 10.7181ZM12.0474 15.2809C12.0162 15.167 11.9629 15.0604 11.8905 14.9672C11.8181 14.8739 11.728 14.7959 11.6254 14.7375C11.5228 14.6791 11.4097 14.6415 11.2925 14.6268C11.1754 14.6122 11.0565 14.6208 10.9426 14.6521C10.7147 14.7152 10.5208 14.8656 10.4031 15.0708C10.2854 15.276 10.2533 15.5193 10.3139 15.7479L10.7361 17.3287C10.7887 17.5247 10.9061 17.697 11.0692 17.8177C11.2323 17.9384 11.4315 18.0003 11.6342 17.9934C11.7118 18.0022 11.7902 18.0022 11.8678 17.9934C11.9825 17.9632 12.09 17.9105 12.1842 17.8385C12.2785 17.7665 12.3575 17.6766 12.4168 17.5739C12.4761 17.4712 12.5145 17.3577 12.5297 17.2401C12.5449 17.1225 12.5367 17.003 12.5055 16.8886L12.0474 15.2809ZM15.1372 13.8707C14.9653 13.7236 14.7443 13.6467 14.5183 13.6554C14.2922 13.6641 14.0778 13.7579 13.9178 13.9178C13.7579 14.0778 13.6641 14.2922 13.6554 14.5183C13.6467 14.7443 13.7236 14.9653 13.8707 15.1372L15.0294 16.2958C15.1977 16.4631 15.4253 16.557 15.6626 16.557C15.8999 16.557 16.1275 16.4631 16.2958 16.2958C16.4631 16.1275 16.557 15.8999 16.557 15.6626C16.557 15.4253 16.4631 15.1977 16.2958 15.0294L15.1372 13.8707ZM17.2748 4.50268C17.2888 3.75578 17.0785 3.02185 16.6712 2.39563C16.2639 1.76941 15.6783 1.27966 14.9899 0.989597C14.3014 0.699536 13.5419 0.622484 12.8093 0.768391C12.0766 0.914297 11.4045 1.27646 10.8798 1.80813L7.70919 5.00566C7.62426 5.09117 7.55701 5.19258 7.51128 5.30408C7.46554 5.41559 7.44222 5.53501 7.44264 5.65553C7.44305 5.77605 7.4672 5.8953 7.51371 6.00649C7.56021 6.11767 7.62817 6.21861 7.71368 6.30353C7.79919 6.38846 7.9006 6.45571 8.0121 6.50144C8.12361 6.54718 8.24303 6.5705 8.36355 6.57009C8.48407 6.56967 8.60332 6.54552 8.71451 6.49901C8.82569 6.45251 8.92663 6.38456 9.01155 6.29904L12.1552 3.10151C12.5248 2.7469 13.0172 2.5489 13.5294 2.5489C14.0416 2.5489 14.534 2.7469 14.9036 3.10151C15.0856 3.28114 15.23 3.49511 15.3286 3.73102C15.4272 3.96692 15.478 4.22005 15.478 4.47573C15.478 4.73141 15.4272 4.98454 15.3286 5.22045C15.23 5.45635 15.0856 5.67032 14.9036 5.84995L11.7061 8.99359C11.5388 9.16187 11.4449 9.38952 11.4449 9.62681C11.4449 9.86409 11.5388 10.0917 11.7061 10.26C11.8744 10.4273 12.102 10.5212 12.3393 10.5212C12.5766 10.5212 12.8043 10.4273 12.9725 10.26L16.197 7.12537C16.8845 6.4251 17.2712 5.484 17.2748 4.50268Z" fill="white"/>
                        </svg>
                        
                        
                        Unlink</button>
            </div>
           
          </div>
        </div>
      </div>
</template>

<script>
import { mapGetters } from 'vuex'

export default {
  name: 'unlinkHouseToProfileModal',
  props: ['house'],
  computed: {
    ...mapGetters({
        getIsUnlinkHouseToProfilePopupOpen: 'house/getIsUnlinkHouseToProfilePopupOpen'
    })
  },
  methods: {
    closeUnlinkHouseToProfilePopup () {
      this.$store.commit('house/setIsUnlinkHouseToProfilePopupOpen', { isUnlinkHouseToProfilePopupOpen: false, selectedHouseObj: null })
    },
    unlinkHouse(){
      const houseObj = this.$store.state.house.selectedHouseObj
      this.housesList = this.$store.dispatch(
        'house/unlinkHouse',
        {
          'user_id': houseObj.enc_user_id,
          'house_id': houseObj.enc_house_id
        }
      ).then(() => {
        this.closeUnlinkHouseToProfilePopup()
        this.$store.dispatch('house/fetchAllHouses', {})
      })
    }
  },
}
</script>
