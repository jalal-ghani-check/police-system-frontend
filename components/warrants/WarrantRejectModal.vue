<template>
  <div>
    <div v-if="getIsWarrantRejectPopupOpen" class="modal fade"
      :class= "{show: getIsWarrantRejectPopupOpen}"
      id="rejectWarrant" tabindex="-1" :style="{display: getIsWarrantRejectPopupOpen ? 'block' : 'none'}"  aria-hidden="true">
      <div class="modal-dialog alert-modal danger modal-dialog-centered">
        <div class="modal-content">
  
          <div class="modal-body">
              <div class="alert-icon">
                  <svg width="54" height="48" viewBox="0 0 54 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M1.73913 11.1304H11.1304V1.73913C11.1304 1.27788 11.3137 0.83553 11.6398 0.509379C11.966 0.183229 12.4083 0 12.8696 0H51.8261C52.2873 0 52.7297 0.18323 53.0558 0.509379C53.382 0.835528 53.5652 1.27788 53.5652 1.73913V37.913C53.5652 40.5883 52.5025 43.1539 50.6108 45.0456C48.7191 46.9373 46.1535 48 43.4783 48H7.30435C5.36711 48 3.50923 47.2304 2.13939 45.8606C0.769563 44.4908 0 42.6329 0 40.6957V12.8696C0 12.4083 0.183229 11.966 0.509379 11.6398C0.83553 11.3137 1.27788 11.1304 1.73913 11.1304ZM11.1304 14.6087H3.47826V40.6957C3.47826 41.7104 3.88137 42.6836 4.5989 43.4011C5.31643 44.1186 6.28961 44.5217 7.30435 44.5217C8.31909 44.5217 9.29227 44.1186 10.0098 43.4011C10.7273 42.6836 11.1304 41.7104 11.1304 40.6957V14.6087ZM14.1705 43.1222L13.6623 44.5217H43.4783C45.231 44.5217 46.9119 43.8255 48.1513 42.5861C49.3907 41.3467 50.087 39.6658 50.087 37.913V3.47826H14.6087V40.6914C14.6017 41.5206 14.4535 42.3426 14.1705 43.1222ZM37.913 22.2609H40.6957C41.1569 22.2609 41.5993 22.4441 41.9254 22.7703C42.2516 23.0964 42.4348 23.5388 42.4348 24C42.4348 24.4612 42.2516 24.9036 41.9254 25.2297C41.5993 25.5559 41.1569 25.7391 40.6957 25.7391H37.913C37.4518 25.7391 37.0094 25.5559 36.6833 25.2297C36.3571 24.9036 36.1739 24.4612 36.1739 24C36.1739 23.5388 36.3571 23.0964 36.6833 22.7703C37.0094 22.4441 37.4518 22.2609 37.913 22.2609ZM37.913 33.3913H40.6957C41.1569 33.3913 41.5993 33.5745 41.9254 33.9007C42.2516 34.2268 42.4348 34.6692 42.4348 35.1304C42.4348 35.5917 42.2516 36.034 41.9254 36.3602C41.5993 36.6863 41.1569 36.8696 40.6957 36.8696H37.913C37.4518 36.8696 37.0094 36.6863 36.6833 36.3602C36.3571 36.034 36.1739 35.5917 36.1739 35.1304C36.1739 34.6692 36.3571 34.2268 36.6833 33.9007C37.0094 33.5745 37.4518 33.3913 37.913 33.3913ZM40.6957 14.6087H24C23.5388 14.6087 23.0964 14.4255 22.7703 14.0993C22.4441 13.7732 22.2609 13.3308 22.2609 12.8696C22.2609 12.4083 22.4441 11.966 22.7703 11.6398C23.0964 11.3137 23.5388 11.1304 24 11.1304H40.6957C41.1569 11.1304 41.5993 11.3137 41.9254 11.6398C42.2516 11.966 42.4348 12.4083 42.4348 12.8696C42.4348 13.3308 42.2516 13.7732 41.9254 14.0993C41.5993 14.4255 41.1569 14.6087 40.6957 14.6087ZM26.7826 25.7391H24C23.5388 25.7391 23.0964 25.5559 22.7703 25.2297C22.4441 24.9036 22.2609 24.4612 22.2609 24C22.2609 23.5388 22.4441 23.0964 22.7703 22.7703C23.0964 22.4441 23.5388 22.2609 24 22.2609H26.7826C27.2439 22.2609 27.6862 22.4441 28.0124 22.7703C28.3385 23.0964 28.5217 23.5388 28.5217 24C28.5217 24.4612 28.3385 24.9036 28.0124 25.2297C27.6862 25.5559 27.2439 25.7391 26.7826 25.7391ZM26.7826 36.8696H24C23.5388 36.8696 23.0964 36.6863 22.7703 36.3602C22.4441 36.034 22.2609 35.5917 22.2609 35.1304C22.2609 34.6692 22.4441 34.2268 22.7703 33.9007C23.0964 33.5745 23.5388 33.3913 24 33.3913H26.7826C27.2439 33.3913 27.6862 33.5745 28.0124 33.9007C28.3385 34.2268 28.5217 34.6692 28.5217 35.1304C28.5217 35.5917 28.3385 36.034 28.0124 36.3602C27.6862 36.6863 27.2439 36.8696 26.7826 36.8696Z" fill="#EE0000"/>
                  </svg>     
              </div>
              <div class="alert-content">
                  <h4>Pending Warrant</h4>
                  <p>Are you sure?<br>
                  This warrant will be permanently rejected.</p>
              </div>
          </div>
          <div class="alert-footer">
              <button @click="closeModal" class="btn" data-bs-dismiss="modal">Close</button>
              <button @click="submitForm" class="btn btn-danger">
                <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M8.23373 6.99925L13.7428 1.4989C13.9075 1.33424 14 1.11091 14 0.878038C14 0.645168 13.9075 0.421835 13.7428 0.257171C13.5782 0.0925073 13.3548 0 13.122 0C12.8891 0 12.6658 0.0925073 12.5011 0.257171L7.00075 5.76627L1.5004 0.257171C1.33573 0.0925073 1.1124 2.06752e-07 0.87953 2.08487e-07C0.64666 2.10222e-07 0.423328 0.0925073 0.258664 0.257171C0.0939997 0.421835 0.00149256 0.645168 0.00149256 0.878038C0.00149256 1.11091 0.0939997 1.33424 0.258664 1.4989L5.76776 6.99925L0.258664 12.4996C0.176702 12.5809 0.111647 12.6776 0.0672522 12.7842C0.022857 12.8907 0 13.005 0 13.1205C0 13.2359 0.022857 13.3502 0.0672522 13.4568C0.111647 13.5633 0.176702 13.66 0.258664 13.7413C0.339956 13.8233 0.436672 13.8884 0.543233 13.9327C0.649794 13.9771 0.764091 14 0.87953 14C0.994969 14 1.10927 13.9771 1.21583 13.9327C1.32239 13.8884 1.4191 13.8233 1.5004 13.7413L7.00075 8.23224L12.5011 13.7413C12.5824 13.8233 12.6791 13.8884 12.7857 13.9327C12.8922 13.9771 13.0065 14 13.122 14C13.2374 14 13.3517 13.9771 13.4583 13.9327C13.5648 13.8884 13.6615 13.8233 13.7428 13.7413C13.8248 13.66 13.8898 13.5633 13.9342 13.4568C13.9786 13.3502 14.0015 13.2359 14.0015 13.1205C14.0015 13.005 13.9786 12.8907 13.9342 12.7842C13.8898 12.6776 13.8248 12.5809 13.7428 12.4996L8.23373 6.99925Z" fill="white"/>
                </svg>
                Reject
              </button>
          </div>
          
        </div>
      </div>
    </div>

    <div v-if="getIsWarrantRejectPopupOpen" class="modal-backdrop fade show" />
  </div>
</template>

<script>
import { mapGetters } from 'vuex'

export default {
  props: ['showModal','warrantId'],
  name: 'WarrantRejectModal',
  data () {
    return {
      active: true
    }
  },
  mounted() {
  },
  computed: {
    // showModalComputed() {
    //   return this.showModal
    // },
    ...mapGetters({
      getRejectWarrantId: 'warrant/getRejectWarrantId',
      getIsWarrantRejectPopupOpen: 'warrant/getIsWarrantRejectPopupOpen'
    })
  },
  methods: {
    submitForm() {
      this.$store
        .dispatch('warrant/updateWarrantStatus', {
            warrant_id: this.getRejectWarrantId,
            status: 'rejected'
        })
        .then(() => {
          this.closeModal()
          this.$store.commit('warrant/setRefreshWarrantList', true)

        })
        .catch(() => {

        })

    },
    closeModal() {
      this.$store.commit('warrant/setRejectWarrantId', null)
      this.$store.commit('warrant/setIsWarrantRejectPopupOpen', false)
      // this.$store.commit('warrant/setRefreshWarrantList', false)
    }
  }
}
</script>