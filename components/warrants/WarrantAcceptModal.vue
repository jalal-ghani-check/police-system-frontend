<template>
  <div>
    <div v-if="getIsWarrantAcceptPopupOpen" class="modal fade"
      :class= "{show: getIsWarrantAcceptPopupOpen}"
      id="activeWarrant" tabindex="-1" :style="{display: getIsWarrantAcceptPopupOpen ? 'block' : 'none'}"  aria-hidden="true">
      <div class="modal-dialog alert-modal danger modal-dialog-centered">
        <div class="modal-content">
   
            <div class="modal-body">
                <div class="alert-icon">
                    <svg width="54" height="48" viewBox="0 0 54 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.73913 11.1304H11.1304V1.73913C11.1304 1.27788 11.3137 0.83553 11.6398 0.509379C11.966 0.183229 12.4083 0 12.8696 0H51.8261C52.2873 0 52.7297 0.18323 53.0558 0.509379C53.382 0.835528 53.5652 1.27788 53.5652 1.73913V37.913C53.5652 40.5883 52.5025 43.1539 50.6108 45.0456C48.7191 46.9373 46.1535 48 43.4783 48H7.30435C5.36711 48 3.50923 47.2304 2.13939 45.8606C0.769563 44.4908 0 42.6329 0 40.6957V12.8696C0 12.4083 0.183229 11.966 0.509379 11.6398C0.83553 11.3137 1.27788 11.1304 1.73913 11.1304ZM11.1304 14.6087H3.47826V40.6957C3.47826 41.7104 3.88137 42.6836 4.5989 43.4011C5.31643 44.1186 6.28961 44.5217 7.30435 44.5217C8.31909 44.5217 9.29227 44.1186 10.0098 43.4011C10.7273 42.6836 11.1304 41.7104 11.1304 40.6957V14.6087ZM14.1705 43.1222L13.6623 44.5217H43.4783C45.231 44.5217 46.9119 43.8255 48.1513 42.5861C49.3907 41.3467 50.087 39.6658 50.087 37.913V3.47826H14.6087V40.6914C14.6017 41.5206 14.4535 42.3426 14.1705 43.1222ZM37.913 22.2609H40.6957C41.1569 22.2609 41.5993 22.4441 41.9254 22.7703C42.2516 23.0964 42.4348 23.5388 42.4348 24C42.4348 24.4612 42.2516 24.9036 41.9254 25.2297C41.5993 25.5559 41.1569 25.7391 40.6957 25.7391H37.913C37.4518 25.7391 37.0094 25.5559 36.6833 25.2297C36.3571 24.9036 36.1739 24.4612 36.1739 24C36.1739 23.5388 36.3571 23.0964 36.6833 22.7703C37.0094 22.4441 37.4518 22.2609 37.913 22.2609ZM37.913 33.3913H40.6957C41.1569 33.3913 41.5993 33.5745 41.9254 33.9007C42.2516 34.2268 42.4348 34.6692 42.4348 35.1304C42.4348 35.5917 42.2516 36.034 41.9254 36.3602C41.5993 36.6863 41.1569 36.8696 40.6957 36.8696H37.913C37.4518 36.8696 37.0094 36.6863 36.6833 36.3602C36.3571 36.034 36.1739 35.5917 36.1739 35.1304C36.1739 34.6692 36.3571 34.2268 36.6833 33.9007C37.0094 33.5745 37.4518 33.3913 37.913 33.3913ZM40.6957 14.6087H24C23.5388 14.6087 23.0964 14.4255 22.7703 14.0993C22.4441 13.7732 22.2609 13.3308 22.2609 12.8696C22.2609 12.4083 22.4441 11.966 22.7703 11.6398C23.0964 11.3137 23.5388 11.1304 24 11.1304H40.6957C41.1569 11.1304 41.5993 11.3137 41.9254 11.6398C42.2516 11.966 42.4348 12.4083 42.4348 12.8696C42.4348 13.3308 42.2516 13.7732 41.9254 14.0993C41.5993 14.4255 41.1569 14.6087 40.6957 14.6087ZM26.7826 25.7391H24C23.5388 25.7391 23.0964 25.5559 22.7703 25.2297C22.4441 24.9036 22.2609 24.4612 22.2609 24C22.2609 23.5388 22.4441 23.0964 22.7703 22.7703C23.0964 22.4441 23.5388 22.2609 24 22.2609H26.7826C27.2439 22.2609 27.6862 22.4441 28.0124 22.7703C28.3385 23.0964 28.5217 23.5388 28.5217 24C28.5217 24.4612 28.3385 24.9036 28.0124 25.2297C27.6862 25.5559 27.2439 25.7391 26.7826 25.7391ZM26.7826 36.8696H24C23.5388 36.8696 23.0964 36.6863 22.7703 36.3602C22.4441 36.034 22.2609 35.5917 22.2609 35.1304C22.2609 34.6692 22.4441 34.2268 22.7703 33.9007C23.0964 33.5745 23.5388 33.3913 24 33.3913H26.7826C27.2439 33.3913 27.6862 33.5745 28.0124 33.9007C28.3385 34.2268 28.5217 34.6692 28.5217 35.1304C28.5217 35.5917 28.3385 36.034 28.0124 36.3602C27.6862 36.6863 27.2439 36.8696 26.7826 36.8696Z" fill="#1DD100"/>
                        </svg>
                        
                </div>
                <div class="alert-content">
                    <h4>Active Warrant</h4>
                    <p>Are you sure?<br>
                  You want to accept this warrant?.</p>
                </div>
            </div>
            <div class="alert-footer">
                <button @click="closeModal" class="btn" data-bs-dismiss="modal">Close</button>
                <button @click="submitForm" class="btn btn-success"><svg width="20" height="15" viewBox="0 0 20 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.5877 1.37885C18.4686 1.25881 18.327 1.16352 18.1709 1.0985C18.0148 1.03348 17.8474 1 17.6783 1C17.5092 1 17.3418 1.03348 17.1858 1.0985C17.0297 1.16352 16.888 1.25881 16.769 1.37885L7.22709 10.9335L3.21822 6.91186C3.0946 6.79244 2.94867 6.69854 2.78875 6.63552C2.62884 6.5725 2.45808 6.54159 2.28622 6.54457C2.11437 6.54754 1.94478 6.58433 1.78714 6.65285C1.6295 6.72136 1.48691 6.82025 1.36749 6.94388C1.24807 7.0675 1.15417 7.21343 1.09115 7.37335C1.02813 7.53326 0.997223 7.70402 1.0002 7.87588C1.00317 8.04773 1.03996 8.21732 1.10848 8.37496C1.17699 8.5326 1.27588 8.67519 1.39951 8.79461L6.31773 13.7128C6.4368 13.8329 6.57845 13.9282 6.73453 13.9932C6.8906 14.0582 7.05801 14.0917 7.22709 14.0917C7.39617 14.0917 7.56357 14.0582 7.71965 13.9932C7.87573 13.9282 8.01738 13.8329 8.13645 13.7128L18.5877 3.26161C18.7177 3.14168 18.8214 2.99611 18.8924 2.83409C18.9634 2.67207 19 2.49711 19 2.32023C19 2.14335 18.9634 1.96839 18.8924 1.80637C18.8214 1.64435 18.7177 1.49879 18.5877 1.37885Z" fill="white" stroke="#1DD100" stroke-width="0.5"/>
                    </svg>
                    
                    Accept</button>
            </div>
           
          </div>

      </div>
    </div>

    <div v-if="getIsWarrantAcceptPopupOpen" class="modal-backdrop fade show" />
  </div>
</template>

<script>
import { mapGetters } from 'vuex'

export default {
  props: ['showModal','warrantId'],
  name: 'WarrantAcceptModal',
  data () {
    return {
      active: true
    }
  },
  mounted() {
  },
  computed: {
    // showModalComputed() {
    //   return this.showModal
    // },
    ...mapGetters({
      getAcceptWarrantId: 'warrant/getAcceptWarrantId',
      getIsWarrantAcceptPopupOpen: 'warrant/getIsWarrantAcceptPopupOpen'
    })
  },
  methods: {
    submitForm() {

      this.$store
        .dispatch('warrant/updateWarrantStatus', {
            warrant_id: this.getAcceptWarrantId,
            status: 'approved'
        })
        .then(() => {
          this.closeModal()
          this.$store.commit('warrant/setRefreshWarrantList', true)

        })
        .catch(() => {

        })

    },
    closeModal() {
      this.$store.commit('warrant/setAcceptWarrantId', null)
      this.$store.commit('warrant/setIsWarrantAcceptPopupOpen', false)
      // this.$store.commit('warrant/setRefreshWarrantList', false)
    }
  }
}
</script>